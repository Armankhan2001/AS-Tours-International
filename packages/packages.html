<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tour Packages | ASTours International</title>
    <link rel="icon" type="image/png" href="../image/astourlogo.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/papaparse@5.3.2/papaparse.min.js"></script>
    
    <style>
        :root {
            --navy: #07203a;
            --gold: #d4af37;
            --secondary-blue: #0077b6;
            --accent-red: #e63946;
        }

        body {
            font-family: 'Inter', sans-serif; /* Using Inter font */
            background: #f7f9fc; /* Lighter, cleaner background */
            margin: 0;
        }
        .font-playfair { font-family: 'Playfair Display', serif; }
        
        /* --- Navbar Component Styles (copied from previous luxury theme) --- */
        .logo-badge {
            height: 60px; 
            width: 60px;
            background-color: #ffd700;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border-bottom-right-radius: 6px;
            border-bottom-left-radius: 6px;
        }
        .logo-badge img {
            width: 85%;
            height: auto;
        }
        @media (min-width: 1024px) {
            .logo-badge {
                height: 160px;
                width: 160px;
                box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
            }
        }
        .btn-gold {
            background: linear-gradient(90deg, var(--gold), #f3d27a);
            color: var(--navy);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-gold:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }
        /* --- End Navbar Styles --- */


        /* Banner */
        .banner {
            position: relative;
            height: 280px;
            overflow: hidden;
            margin-bottom: 25px;
            background: url("../image/packagebgimage.avif") no-repeat center/cover;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Updated gradient for luxury feel */
            background: linear-gradient(135deg, rgba(7,32,58,0.85), rgba(0,0,0,0.65));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: #fff;
            padding: 20px;
        }

        .banner-overlay h1 {
            font-size: 2.8rem; /* Slightly larger */
            font-weight: 800;
            margin-bottom: 12px;
            letter-spacing: 1px;
            text-shadow: 0 3px 8px rgba(0,0,0,0.6);
            font-family: 'Playfair Display', serif;
        }

        .banner-overlay p {
            font-size: 1.2rem;
            font-weight: 400;
            max-width: 700px;
            line-height: 1.6;
            text-shadow: 0 2px 6px rgba(0,0,0,0.3);
            color: #e0e0e0;
        }

        /* Filters */
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 30px auto;
            max-width: 1000px;
            padding: 0 15px;
        }
        .filters input, .filters select {
            padding: 12px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 12px;
            flex: 1;
            min-width: 220px;
            transition: border-color 0.3s;
        }
        .filters input:focus, .filters select:focus {
            border-color: var(--navy);
            outline: none;
            box-shadow: 0 0 0 2px rgba(7, 32, 58, 0.1);
        }

        /* Grid Cards */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            padding: 0 20px 50px;
        }
        .card {
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 1px solid #eee;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        .card:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 12px 25px rgba(0,0,0,0.15); 
        }
        .card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .card-body { padding: 20px; }
        .country-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--navy), var(--secondary-blue));
            color: #fff;
            font-size: 0.85rem;
            font-weight: 700;
            padding: 6px 14px;
            border-radius: 50px;
            margin-bottom: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        .title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--navy);
            margin-bottom: 10px;
            font-family: 'Playfair Display', serif;
        }
        .price {
            font-size: 1.2rem;
            color: var(--accent-red);
            font-weight: bold;
            margin-bottom: 10px;
        }
        .details {
            font-size: 0.95rem;
            color: #555;
            margin-bottom: 15px;
        }
        .btn {
            display: inline-block;
            background: var(--gold);
            color: var(--navy);
            padding: 10px 18px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s;
        }
        .btn:hover { 
            background: #c3a131; 
            color: var(--navy);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }

        /* --- Custom Footer --- */
        footer.luxury-footer {
            background: var(--navy);
            color: white;
            padding: 28px;
            text-align: center;
            font-size: 14px;
            margin-top: 50px;
            border-top: 4px solid var(--gold);
        }
        footer.luxury-footer a {
            color: var(--gold);
        }

        /* WhatsApp Button */
        .whatsapp-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #25d366;
            color: white;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            z-index: 999;
            text-decoration: none;
            transition: transform 0.2s;
        }
        .whatsapp-float:hover {
            background: #1ebe5d;
            transform: scale(1.05);
        }

        /* The extra-details section is kept for data but hidden, as per the new click behavior */
        .extra-details {
            display: none;
        }
    </style>
</head>
<body>

    <header class="relative top-0 z-50 bg-white/95 backdrop-blur-md shadow-lg">
        <div class="max-w-7xl mx-auto px-4 lg:px-8">
            <div class="flex items-center justify-between h-24">

                <div class="absolute top-0 left-4 z-50">
                    <a href="../index.html" class="logo-badge">
                        <img src="../image/astourlogo.png" alt="AS Tours Logo">
                    </a>
                </div>

                <div class="w-16 lg:w-36 flex-shrink-0"></div>

                <nav class="hidden lg:flex items-center gap-8 text-[--navy] font-medium text-sm">
                    <a href="../templates/astours.html" class="hover:text-[--gold] transition-colors">Home</a>
                    <a href="../visa/visaservices.html" class="hover:text-[--gold] transition-colors">Visa</a>
                    <a href="#" class="text-[--gold] font-bold border-b-2 border-[--gold]">Packages</a>
                    <a href="../templates/Travel/About.html" class="hover:text-[--gold] transition-colors">About</a>
                    <a href="../templates/contact.html" class="hover:text-[--gold] transition-colors">Contact</a>
                    <a href="../b2b/Visa/b2b.html" class="ml-4 px-6 py-2.5 rounded-full btn-gold shadow-md">Partner with Us</a>
                </nav>

                <div class="lg:hidden ml-auto">
                    <button id="mobileBtn" class="p-2 text-[--navy] hover:bg-gray-100 rounded-md transition-colors">
                        <i class="fas fa-bars fa-lg"></i>
                    </button>
                </div>

            </div>
        </div>

        <div id="mobileMenu" class="hidden lg:hidden bg-white border-t border-gray-200 absolute w-full shadow-lg z-40">
            <div class="flex flex-col px-6 py-6 space-y-4 text-[--navy] font-medium">
                <div class="h-8"></div> <a href="../templates/astours.html" class="hover:text-[--gold]">Home</a>
                <a href="../visa/visaservices.html" class="hover:text-[--gold]">Visa</a>
                <a href="#" class="text-[--gold] font-bold">Packages</a>
                <a href="../templates/Travel/About.html" class="hover:text-[--gold]">About</a>
                <a href="../templates/contact.html" class="hover:text-[--gold]">Contact</a>
                <a href="../b2b/Visa/b2b.html" class="mt-2 px-4 py-3 rounded-lg btn-gold text-center">Partner with Us</a>
            </div>
        </div>
    </header>
    <div class="banner">
        <div class="banner-overlay">
            <h1>‚úàÔ∏è Discover the World with Us</h1>
            <p>ASTours International ‚Äì Crafting Journeys, Creating Memories</p>
        </div>
    </div>

    <div class="filters">
        <input type="text" id="searchInput" placeholder="üîç Search packages or locations...">
        <select id="countryFilter">
            <option value="">üåê All Countries</option>
        </select>
    </div>

    <div id="cardsContainer" class="grid"></div>

    <footer class="luxury-footer">
        <p>&copy; <script>document.write(new Date().getFullYear())</script> ASTours International. All Rights Reserved.</p>
    </footer>

    <a href="https://wa.me/919321892924?text=Hello%20ASTours%20International%2C%20I%20am%20interested%20in%20your%20packages." class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script>
        // Mobile menu toggle logic
        document.getElementById('mobileBtn').addEventListener('click', () => {
            document.getElementById('mobileMenu').classList.toggle('hidden');
        });
        
        // --- Original Package Logic (Kept intact) ---
        const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSKWpvBUstFi-xtd__NDN3MqnMBb04fzGfAb9Ce27ao0gMGejfXqCp9V_Dh4G_Z8ungzPf4MHsy0hkx/pub?output=csv";
        let allData = [];

        // Render Cards
        function renderCards(data) {
            const container = document.getElementById("cardsContainer");
            container.innerHTML = "";

            if (data.length === 0) {
                container.innerHTML = "<p class='text-center w-100 py-5 text-muted'>No matching packages found.</p>";
                return;
            }


            data.forEach((row, index) => {
                if (!row['Package Name']) return;

                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                    <img src="${row['Image URL']}" alt="${row['Package Name']}">
                    <div class="card-body">
                        <div class="country-badge">${row['Country']}</div>
                        <div class="title">${row['Package Name']}</div>
                        <div class="price">${row['Price']}</div>
                        <div class="details">
                            <i class="fas fa-map-marker-alt text-danger"></i> ${row['Location']} <br>
                            <i class="fas fa-clock text-info"></i> ${row['Duration']} <br>
                            <i class="fas fa-star text-warning"></i> ${row['Highlights']}
                        </div>
                        <a href="${row['Link/Contact']}" class="btn" target="_blank">Book Now</a>
                    </div>
                    <div class="extra-details" id="extra-${index}">
                        <h4>‚úÖ Inclusions:</h4>
                        <p>${row['Inclusions'] || 'Not specified'}</p>
                        <h4>‚ùå Exclusions:</h4>
                        <p>${row['Exclusions'] || 'Not specified'}</p>
                        <h4>üìù Note:</h4>
                        <p>${row['Note'] || 'No notes'}</p>
                    </div>
                `;

                // === UPDATED CLICK HANDLER FOR FULL VIEW ITINERARY ===
                card.addEventListener("click", (e) => {
                    // Prevent navigation if the user clicked the "Book Now" button
                    if (e.target.tagName.toLowerCase() === "a") return; 

                    // Navigate to the proper itinerary view page
                    const packageName = encodeURIComponent(row['Package Name']);
                    window.location.href = `properitineraryview.html?package=${packageName}`;
                });


                container.appendChild(card);
            });
        }

        // Apply Search + Filter
        function applyFilters() {
            const searchValue = document.getElementById("searchInput").value.toLowerCase();
            const selectedCountry = document.getElementById("countryFilter").value;

            const filtered = allData.filter(row => {
                const packageName = row['Package Name'] || '';
                const location = row['Location'] || '';
                const country = row['Country'] || '';
                
                const matchesSearch = packageName.toLowerCase().includes(searchValue) || location.toLowerCase().includes(searchValue);
                const matchesCountry = selectedCountry === "" || country === selectedCountry;
                return matchesSearch && matchesCountry;
            });

            renderCards(filtered);
        }

        // Load Data from Google Sheet
        Papa.parse(sheetUrl, {
            download: true,
            header: true,
            complete: function(results) {
                allData = results.data.filter(r => r['Package Name'] && r['Package Name'].trim() !== ''); // skip empty rows
                renderCards(allData);

                // Populate country filter dynamically
                const countries = [...new Set(allData.map(r => r['Country']).filter(c => c && c.trim() !== ''))].sort();
                const countryFilter = document.getElementById("countryFilter");
                countries.forEach(country => {
                    const option = document.createElement("option");
                    option.value = country;
                    option.textContent = country;
                    countryFilter.appendChild(option);
                });
            }
        });

        // Event Listeners
        document.getElementById("searchInput").addEventListener("input", applyFilters);
        document.getElementById("countryFilter").addEventListener("change", applyFilters);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>